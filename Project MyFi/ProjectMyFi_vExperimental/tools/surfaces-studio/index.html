<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Surfaces Studio (v1)</title>
  <link rel="stylesheet" href="./studio.css"/>
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <strong>Surfaces Studio</strong>
      <span class="muted">v1 · compose surfaces · uplift safely</span>
    </div>
    <div class="actions">
      <button id="btnOpen" class="btn">Open Project Folder</button>
      <button id="btnReload" class="btn" disabled>Reload Manifest</button>
      <button id="btnValidate" class="btn" disabled>Validate</button>
    </div>
  </header>

  <main class="layout">
    <aside class="pane pane-left">
      <h3>Screens</h3>
      <div id="screensList" class="list"></div>

      <h3 style="margin-top:14px;">UI Units (Uplift Packs)</h3>
      <div id="uiUnitsList" class="list"></div>
    </aside>

    <section class="pane pane-mid">
      <div class="paneTitle">
        <h3 id="surfaceTitle">Surface</h3>
        <div class="row">
          <button id="btnSaveSurface" class="btn" disabled>Save surface.json</button>
          <button id="btnDownloadSurface" class="btn" disabled>Download surface.json</button>
          <div class="pillGroup" title="Switch surface editor view">
            <button id="btnViewCanvas" class="pillBtn" disabled>Canvas</button>
            <button id="btnViewList" class="pillBtn" disabled>List</button>
          </div>
        </div>
      </div>

      <div id="canvasWrap" class="canvasWrap" hidden>
        <div class="canvasTop">
          <div class="muted" id="canvasHint">Drag parts to move them between slots. Drop onto a part to insert above it.</div>
          <div class="row">
            <select id="addPartKind" class="select" disabled></select>
            <button id="btnAddPart" class="btn" disabled>Add to selected slot</button>
          </div>
        </div>
        <div id="canvas" class="canvas"></div>
      </div>

      <div id="listWrap" class="split">
        <div class="splitCol">
          <h4>Slots</h4>
          <div id="slotsTree" class="tree"></div>
        </div>
        <div class="splitCol">
          <h4>Parts in Selected Slot</h4>
          <div id="partsList" class="list"></div>
          <div class="hint">Use ▲▼ to reorder. Use “Move to slot” to relocate.</div>
        </div>
      </div>

      <div class="editorRow">
        <div class="editorCol">
          <h4>Selected Part Instance (props)</h4>
          <textarea id="propsEditor" spellcheck="false" disabled></textarea>
          <div class="row">
            <button id="btnApplyProps" class="btn" disabled>Apply props</button>
          </div>
        </div>
        <div class="editorCol">
          <h4>Selected Part Instance (bind)</h4>
          <textarea id="bindEditor" spellcheck="false" disabled></textarea>
          <div class="row">
            <button id="btnApplyBind" class="btn" disabled>Apply bind</button>
          </div>
          <div class="hint">Bind is optional in surface.json. It is safe metadata for Studio/data wiring (v1 editor).</div>
        </div>
        <div class="editorCol">
          <h4>Screen Uplift (quests/uplift.css)</h4>
          <textarea id="screenUpliftEditor" spellcheck="false" disabled></textarea>
          <div class="row">
            <button id="btnSaveScreenUplift" class="btn" disabled>Save uplift.css</button>
            <button id="btnClearScreenUplift" class="btn" disabled>Clear</button>
            <button id="btnCopyScreenAIPack" class="btn" disabled>Copy AI Pack</button>
          </div>
        </div>
      </div>

      <div class="log">
        <div class="logTitle">Output</div>
        <pre id="logOut"></pre>
      </div>
    </section>

    <aside class="pane pane-right">
      <h3>Uplift Pack</h3>
      <div id="upliftMeta" class="muted">Select a UI Unit to load its pack.</div>

      <div class="tabs">
        <button class="tab active" data-tab="pack">Pack</button>
        <button class="tab" data-tab="edit">Edit</button>
      </div>

      <section id="tab-pack" class="tabPane active">
        <h4>Prompt</h4>
        <pre id="packPrompt" class="code"></pre>
        <h4>Contract</h4>
        <pre id="packContract" class="code"></pre>
        <h4>Editable Files Included</h4>
        <pre id="packFiles" class="code"></pre>
        <div class="row">
          <button id="btnCopyAIPack" class="btn" disabled>Copy AI Pack</button>
        </div>
      </section>

      <section id="tab-edit" class="tabPane">
        <h4>uplift.css</h4>
        <textarea id="upliftCssEditor" spellcheck="false" disabled></textarea>
        <h4>uplift.html (optional)</h4>
        <textarea id="upliftHtmlEditor" spellcheck="false" disabled></textarea>

        <div class="row">
          <button id="btnSaveUplift" class="btn" disabled>Save uplift</button>
          <button id="btnClearUplift" class="btn" disabled>Clear uplift</button>
        </div>

        <div class="hint">
          Studio only writes allowlisted files. To revert, clear uplift files (or delete uplift.html when supported).
        </div>
      </section>
    </aside>
  </main>

  <script type="module" src="./studio.js"></script>
</body>
</html>
