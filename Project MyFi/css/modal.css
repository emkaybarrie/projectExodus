/* ---- Theme tokens ---- */
:root{
  --modal-backdrop: rgba(10,12,16,.55);
  --modal-bg:#0f1115; --modal-card:#141821; --modal-text:#e9edf1; --modal-muted:#94a3b8;
  --modal-accent:#6ee7ff; --border:#1f2430; --radius:16px;

  /* Set at runtime by JS to the space between header & footer */
  --modal-max-h: 86svh;
}

/* ---- Backdrop centers the modal ---- */
#appModalBackdrop.modal-backdrop{
  position:fixed; inset:0; background:var(--modal-backdrop);
  display:none; align-items:center; justify-content:center; z-index:1000;
}
#appModalBackdrop[data-open="true"]{ display:flex; }

/* ---- Modal shell: centered, auto height, clamped by --modal-max-h ---- */
#appModalBackdrop .modal{
  width:min(720px,92vw);
  height:auto;
  max-height: var(--modal-max-h);

  background:linear-gradient(145deg,var(--modal-card),var(--modal-bg));
  color:var(--modal-text);
  border:1px solid var(--border); border-radius:var(--radius);
  box-shadow:0 10px 40px rgba(0,0,0,.45);

  display:grid;
  grid-template-columns: 1fr; /* single column only */

  overflow:hidden;

  transform:translateY(8px); opacity:0; transition:opacity .15s ease, transform .15s ease;
}
#appModalBackdrop[data-open="true"] .modal{ opacity:1; transform:translateY(0); }

/* ---- Sidebar ---- */
#appModalBackdrop .modal__menu{ display:none !important; }

#appModalBackdrop .modal__menu{
  background:rgba(255,255,255,.02);
  border-right:1px solid var(--border);
  padding:10px;
  overflow:auto;
  -webkit-overflow-scrolling: touch;
}

#appModalBackdrop .modal__menu h3{
  font:600 13px/1.1 system-ui,sans-serif;
  letter-spacing:.08em; text-transform:uppercase; color:var(--modal-muted);
  padding:8px 10px; margin:2px 0 6px;
}
#appModalBackdrop .menu__btn{
  width:100%; text-align:left; padding:12px;
  border-radius:10px; border:1px solid transparent;
  background:transparent; color:var(--modal-text); cursor:pointer;
  font:500 14px/1.25 system-ui;
}
#appModalBackdrop .menu__btn:hover,
#appModalBackdrop .menu__btn[aria-current="true"]{
  background:rgba(110,231,255,.08);
  border-color:rgba(110,231,255,.3);
}

/* ---- Body ---- */
#appModalBackdrop .modal__body{
  display:grid;
  grid-template-rows: auto minmax(0, 1fr) auto; /* content area can scroll */
  min-width:0; min-height:0;
}
#appModalBackdrop .modal__header{
  padding:12px 12px; border-bottom:1px solid var(--border);
  display:flex; align-items:center; gap:8px;
}
#appModalBackdrop .modal__title{ font:700 16px system-ui,sans-serif; }
#appModalBackdrop .modal__back{ display:none; }

#appModalBackdrop .modal__content{
  padding: 0.75rem 1.5rem;
  overflow:auto;
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: contain;
  min-width:0;
  scrollbar-gutter: stable;
  box-sizing: border-box;

}
#appModalBackdrop .modal__footer{
  padding:10px 12px; border-top:1px solid var(--border);
  display:flex; gap:8px; justify-content:flex-end;
}

#appModalBackdrop .modal__footer .btn--back{ margin-right:auto; }


/* Inputs & helpers */
#appModalBackdrop .btn{
  appearance:none; border:1px solid var(--border); background:rgba(255,255,255,.03); color:var(--modal-text);
  padding:10px 14px; border-radius:10px; cursor:pointer; font:600 14px system-ui;
}
#appModalBackdrop .btn--accent{ border-color:rgba(110,231,255,.4); background:rgba(110,231,255,.12); }
#appModalBackdrop .field{ display:grid; gap:6px; margin-bottom:12px; min-width:0; }
#appModalBackdrop .field label{ font:600 12px/1 system-ui; color:var(--modal-muted); letter-spacing:.02em; }
#appModalBackdrop .input, #appModalBackdrop select{
  width:100%; max-width:100%;
  border:1px solid var(--border); background:#0b0d12; color:var(--modal-text);
  border-radius:10px; padding:10px 12px; font:14px system-ui; min-width:0;
}

#appModalBackdrop .field{ gap:8px; margin-bottom:14px; }
#appModalBackdrop .helper{ font: 13px/1.4 system-ui,sans-serif; color: var(--modal-muted); margin: 2px 0 10px; }
#appModalBackdrop .current-row{ display:flex; justify-content:space-between; align-items:center; }
#appModalBackdrop .current-value{ font-weight:600; }


/* Single / drilldown states (unchanged) */
#appModalBackdrop.is-detail .modal__menu { display: none; }
#appModalBackdrop.is-detail .modal { grid-template-columns: 1fr; }
#appModalBackdrop.is-single .modal__menu { display: none; }
#appModalBackdrop.is-single .modal { grid-template-columns: 1fr; }

/* Compact & Glass options */
#appModalBackdrop .modal--compact { width: min(360px, 92vw) !important; grid-template-columns: minmax(0,1fr) !important; }
#appModalBackdrop .modal--glass {
  background: linear-gradient(145deg, rgba(20,24,33,.55), rgba(12,14,20,.45)) !important;
  backdrop-filter: blur(14px) saturate(135%);
  border: 1px solid rgba(200,230,255,.18);
}

/* Menu grid */
#appModalBackdrop .modal__grid { display: grid; gap: 10px; padding: 12px 12px 16px; grid-template-columns: repeat(3, minmax(0, 1fr)); }
#appModalBackdrop .menuGrid__btn {
  text-align: center; padding: 14px 10px; border-radius: 12px;
  border: 1px solid rgba(110,231,255,.28); background: rgba(110,231,255,.08);
  color: var(--modal-text); font: 600 13px system-ui; cursor: pointer;
}

#appModalBackdrop .btn--danger { border-color:#5b2730; background:rgba(255,80,100,.12); }
#appModalBackdrop .btn--back   { margin-right:auto; } /* Back sits left in footer */

#appModalBackdrop .helper      { color: var(--modal-muted); font: 13px/1.5 system-ui; }
#appModalBackdrop .form-error  { color:#ff7b7b; font:12px/1.4 system-ui; margin-top:6px; }
#appModalBackdrop .current-row { display:flex; align-items:center; justify-content:space-between; }

