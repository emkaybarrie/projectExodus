:root{
  --ao-backdrop: rgba(10,12,16,.8);
  --ao-card: #0f1115;
  --ao-text:#e9edf1;
  --ao-muted:#9fb0c3;
  --ao-accent:#8be9ff;
  --ao-border:#1f2430;
  --ao-radius:16px;
  --ao-word-fade: .44s;   /* <-- control per-word fade duration */
}

/* =========================
   FULLSCREEN STAGE (NARRATION)
   ========================= */
#ao-stage{
  position:fixed; inset:0;
  z-index: 10001;
  display:flex; align-items:center; justify-content:center;
  background:#000; /* swap to bg image via JS if desired */
  opacity:1; transition:opacity .25s ease;

  overflow:hidden;                 /* ensures big glows don't scroll */
}
#ao-stage.hidden{ opacity:0; pointer-events:none; }
#ao-stage.ao-bg-image{ background-size:cover; background-position:center; }

/* Narration container: fixed layout width to avoid first-line “typewriter” jitter */
.ao-narration-layer{
  width: clamp(320px, 92vw, 820px);  /* <- fixed layout width */
  max-width: 100%;
  color: var(--ao-text);
  text-align:left;
  font-family: "Cinzel","Crimson Pro", serif;
  font-size: 18px;
  line-height: 1.55;
  letter-spacing: .01em;
  padding: 0;                        /* bare mode: no box */

  position: relative;              /* new */
  z-index: 1;                      /* above ::before/::after */
}

/* Optional boxed look (toggle with JS by adding .boxed) */
.ao-narration-layer.boxed{
  padding: 20px 18px;
  background: rgba(12, 14, 20, .40);
  border: 1px solid rgba(255,255,255,.08);
  border-radius: 14px;
  box-shadow: 0 12px 40px rgba(0,0,0,.45);
  backdrop-filter: blur(6px) saturate(110%);
}

/* Keep first line height stable */
.ao-narration-layer p{
  margin:0 0 12px 0;
  min-height: 1.55em;
}

/* Word-by-word fade (whole word appears as a unit) */
.ao-word{
  display:inline-block;              /* stabilize transforms */
  opacity:0;
  transform: translateY(2px);
  transition: opacity var(--ao-word-fade) ease, transform var(--ao-word-fade) ease;
  will-change: opacity, transform;
}
.ao-word.show{
  opacity:1;
  transform:none;
}

/* Tap-to-continue chip (can be hidden via JS) */
.ao-advance{ display:none; margin-top: 8px; justify-content:center; }
.ao-advance.show{ display:flex; }
.ao-advance .chip{
  font:600 12px system-ui; color: var(--ao-text);
  padding:6px 10px; border:1px solid rgba(255,255,255,.16);
  border-radius:999px; background:rgba(255,255,255,.08);
  letter-spacing:.02em; opacity:.92;
}
.ao-advance .chip:after{ content:"  •  tap to continue"; opacity:.85; }

/* =========================
   MODAL OVERLAY (INPUT STEPS)
   ========================= */

/* Overlay is truly hidden unless data-open="true" */
#ao-overlay{
  position:fixed; inset:0; z-index:10002;
  display:flex; align-items:center; justify-content:center;

  /* closed state */
  opacity: 0;
  visibility: hidden;
  pointer-events: none;
  transform: translateY(6px);
  transition: opacity .18s ease, transform .18s ease, visibility 0s linear .18s;

  background: var(--ao-backdrop);
  backdrop-filter: blur(10px) saturate(115%);
  -webkit-backdrop-filter: blur(10px) saturate(115%);
}
#ao-overlay[data-open="true"]{
  opacity: 1;
  visibility: visible;
  pointer-events: auto;
  transform: none;
  transition: opacity .18s ease, transform .18s ease, visibility 0s;
}

#ao-card{
  width:min(780px,94vw);
  max-height:92svh;
  background: linear-gradient(145deg,#141822,var(--ao-card));
  color: var(--ao-text);
  border:1px solid var(--ao-border);
  border-radius: var(--ao-radius);
  box-shadow: 0 18px 50px rgba(0,0,0,.45);
  display:grid; grid-template-rows:auto minmax(0,1fr) auto;
  overflow:hidden;
}

#ao-header{ display:flex; align-items:center; gap:.6rem; padding:12px 14px; border-bottom:1px solid var(--ao-border); }
#ao-title{ font:700 16px system-ui; letter-spacing:.02em; }
#ao-body{ padding: 16px 18px; overflow:auto; -webkit-overflow-scrolling:touch; }
#ao-footer{ display:flex; gap:.6rem; justify-content:flex-end; padding:12px 14px; border-top:1px solid var(--ao-border); }

/* Progress */
#ao-progress{ height:4px; background:rgba(255,255,255,.06); border-radius:999px; overflow:hidden; margin-bottom:10px; }
#ao-progress i{ display:block; height:100%; width:0%; background:linear-gradient(90deg, rgba(139,233,255,.75), rgba(139,233,255,.35)); transition:width .25s ease; }

/* Buttons */
.ao-btn{
  appearance:none; cursor:pointer; padding:10px 14px; border-radius:12px;
  border:1px solid var(--ao-border); background:rgba(255,255,255,.05); color:#e9edf1; font:600 14px system-ui;
}
.ao-btn--accent{ border-color: rgba(139,233,255,.5); background: linear-gradient(180deg, rgba(139,233,255,.22), rgba(139,233,255,.10)); }
.ao-btn--ghost{ background: transparent; }

/* Inputs & tiles */
.ao-field{ display:grid; gap:6px; margin:8px 0 12px; }
.ao-field label{ font:600 12px/1 system-ui; color: var(--ao-muted); letter-spacing:.02em; }
.ao-input, .ao-select{
  width:100%; padding:10px 12px; border-radius:10px; border:1px solid var(--ao-border);
  background:#0b0d12; color:#e9edf1; font:14px system-ui;
}
.ao-tiles{ display:grid; grid-template-columns:1fr; gap:10px; }
@media (min-width:520px){ .ao-tiles{ grid-template-columns: 1fr 1fr; } }
.ao-tile{
  border:1px solid var(--ao-border); background:rgba(255,255,255,.04);
  border-radius:14px; padding:14px; display:grid; gap:4px; cursor:pointer;
}
.ao-tile:hover{ border-color: rgba(139,233,255,.35); }
.ao-tile[aria-selected="true"]{
  background: linear-gradient(180deg, rgba(139,233,255,.18), rgba(139,233,255,.08));
  border-color: rgba(139,233,255,.65);
}
.ao-tile h4{ margin:0 0 2px 0; font:700 15px system-ui; }
.ao-tile p{ margin:0; font:13px/1.25 system-ui; color: var(--ao-muted); }

/* Prompt + info */
.ao-prompt-row{ display:flex; align-items:center; justify-content:space-between; gap:8px; margin:10px 0 8px; }
.ao-prompt{ font:600 13px/1.2 system-ui; color: var(--ao-muted); letter-spacing:.02em; }
.ao-info-btn{
  appearance:none; border:1px solid var(--ao-border); background:rgba(255,255,255,.04);
  color:var(--ao-text); border-radius:10px; font:600 12px system-ui; padding:6px 10px; cursor:pointer;
}
.ao-infopanel{
  display:none; margin:6px 0 10px; padding:10px 12px; border-radius:10px;
  border:1px dashed var(--ao-border); background:rgba(255,255,255,.04); color:var(--ao-muted);
  font:13px/1.35 system-ui;
}
.ao-infopanel.open{ display:block; }

/* Error text */
.ao-error{ color:#ff7b7b; font:12px/1.35 system-ui; display:none; }


