<!-- BadlandsStage baseline.html — HUB 3-Tab Stage -->
<!-- Tabs: Current Event | Recent Events | Narrative Log (tab bar at bottom) -->
<!-- Loadout moved to WorldMap component -->

<div class="BadlandsStage__container" data-active-tab="current" data-stage-mode="world">

  <!-- ═══════════════════════════════════════════════════════════════════════ -->
  <!-- TAB CONTENT AREA -->
  <!-- ═══════════════════════════════════════════════════════════════════════ -->
  <div class="BadlandsStage__content">

    <!-- TAB: Current Event -->
    <div class="BadlandsStage__tabContent" data-tab="current">

      <!-- IDLE STATE: Scenic imagery -->
      <div class="BadlandsStage__scenic" data-visible="true">
        <div class="BadlandsStage__scenicBg"></div>
        <div class="BadlandsStage__scenicOverlay">
          <span class="BadlandsStage__scenicTitle" data-bind="scenicTitle">Wardwatch</span>
          <span class="BadlandsStage__scenicSubtitle" data-bind="scenicSubtitle">— All quiet</span>
        </div>
      </div>

      <!-- ENCOUNTER STATE: Encounter UI -->
      <div class="BadlandsStage__encounter" data-visible="false">
        <div class="BadlandsStage__encounterBg"></div>

        <!-- Encounter header -->
        <div class="BadlandsStage__encounterHeader">
          <span class="BadlandsStage__encounterIcon" data-bind="encounterIcon">&#128058;</span>
          <div class="BadlandsStage__encounterInfo">
            <span class="BadlandsStage__encounterName" data-bind="encounterName">Badlands Beast</span>
            <span class="BadlandsStage__encounterType" data-bind="encounterType">BEAST</span>
          </div>
          <div class="BadlandsStage__encounterTimer">
            <span class="BadlandsStage__timerValue" data-bind="timerValue">27</span>
          </div>
        </div>

        <!-- Encounter visual -->
        <div class="BadlandsStage__encounterBody">
          <div class="BadlandsStage__enemyVisual">
            <span class="BadlandsStage__enemySprite" data-bind="enemySprite">&#128058;</span>
          </div>
          <div class="BadlandsStage__enemyHealth">
            <div class="BadlandsStage__enemyHealthBar">
              <div class="BadlandsStage__enemyHealthFill" data-bind="enemyHealthFill"></div>
            </div>
          </div>
          <div class="BadlandsStage__autobattlerStatus">
            <span class="BadlandsStage__statusDot"></span>
            <span class="BadlandsStage__statusText">Autobattler Active</span>
          </div>
        </div>

        <!-- Timer bar -->
        <div class="BadlandsStage__timerBar">
          <div class="BadlandsStage__timerFill" data-bind="timerFill"></div>
        </div>

        <!-- Aid Avatar CTA -->
        <div class="BadlandsStage__encounterCTA">
          <button class="BadlandsStage__aidBtn" data-action="aidAvatar">
            <span class="BadlandsStage__aidIcon">&#9876;</span>
            <span class="BadlandsStage__aidLabel">Aid Avatar</span>
          </button>
        </div>
      </div>
    </div>

    <!-- TAB: Narrative Log (Placeholder for day narrative) -->
    <div class="BadlandsStage__tabContent" data-tab="narrative">
      <div class="BadlandsStage__narrativeLog">
        <div class="BadlandsStage__narrativeHeader">
          <span class="BadlandsStage__narrativeIcon">&#128220;</span>
          <span class="BadlandsStage__narrativeTitle">Today's Journey</span>
        </div>
        <div class="BadlandsStage__narrativeList" data-bind="narrativeList">
          <div class="BadlandsStage__narrativeEntry BadlandsStage__narrativeEntry--placeholder">
            <span class="BadlandsStage__narrativeText">Your journey awaits... The narrative log will chronicle your avatar's day as events unfold.</span>
          </div>
        </div>
      </div>
    </div>

    <!-- TAB: Recent Events (overlay on background) -->
    <div class="BadlandsStage__tabContent" data-tab="recent">
      <div class="BadlandsStage__recentOverlay">
        <ul class="BadlandsStage__recentList" data-bind="recentList">
          <li class="BadlandsStage__recentItem BadlandsStage__recentItem--empty">
            <span class="BadlandsStage__recentItemText">No recent encounters</span>
          </li>
        </ul>
      </div>
    </div>

  </div>

  <!-- ═══════════════════════════════════════════════════════════════════════ -->
  <!-- WO-S9: TOP BORDER ROW - Activity state caption left, Queue indicator right -->
  <!-- ═══════════════════════════════════════════════════════════════════════ -->
  <div class="BadlandsStage__topBar">
    <!-- WO-WATCH-EPISODE-ROUTING: Activity state segment caption -->
    <div class="BadlandsStage__segmentCaption" data-bind="segmentCaption">
      <span class="BadlandsStage__segmentTime" data-bind="segmentTime">06:00</span>
      <span class="BadlandsStage__segmentLabel" data-bind="segmentLabel">Morning</span>
      <span class="BadlandsStage__activityLabel" data-bind="activityLabel">Explore</span>
    </div>
    <div class="BadlandsStage__queueIndicator" data-visible="false" data-bind="queueIndicator">
      <span class="BadlandsStage__queueLabel">Queued:</span>
      <div class="BadlandsStage__queueDots" data-bind="queueDots">
        <!-- Dots rendered dynamically -->
      </div>
    </div>
  </div>

  <!-- ═══════════════════════════════════════════════════════════════════════ -->
  <!-- WO-S9: BOTTOM BORDER ROW - Centered radio dots -->
  <!-- ═══════════════════════════════════════════════════════════════════════ -->
  <div class="BadlandsStage__bottomBar">
    <div class="BadlandsStage__dotNav">
      <button class="BadlandsStage__dot BadlandsStage__dot--active" data-action="switchTab" data-tab="current" data-icon="&#127758;" data-label="Current" aria-label="Current Event"></button>
      <button class="BadlandsStage__dot" data-action="switchTab" data-tab="narrative" data-icon="&#128214;" data-label="Narrative" aria-label="Narrative Log"></button>
      <button class="BadlandsStage__dot" data-action="switchTab" data-tab="recent" data-icon="&#128220;" data-label="Recent" aria-label="Recent Events"></button>
    </div>
  </div>

  <!-- TAB TOAST (WO-HUB-02: Shows icon + label on tab change) -->
  <div class="BadlandsStage__tabToast" data-visible="false">
    <span class="BadlandsStage__tabToastIcon" data-bind="tabToastIcon">&#127758;</span>
    <span class="BadlandsStage__tabToastLabel" data-bind="tabToastLabel">Current</span>
  </div>

  <!-- ═══════════════════════════════════════════════════════════════════════ -->
  <!-- WO-CAPSULE-V2: Event Notification System -->
  <!-- States: hidden → pending (top banner) → collapsed (top-right circle) → expanded (HUD) → engaged -->
  <!-- ═══════════════════════════════════════════════════════════════════════ -->

  <!-- PENDING STATE: Full capsule banner at top -->
  <div class="BadlandsStage__eventCapsule" data-visible="false" data-state="pending" data-action="expandEvent">
    <div class="BadlandsStage__capsuleIcon" data-bind="capsuleIcon">&#128058;</div>
    <div class="BadlandsStage__capsuleContent">
      <span class="BadlandsStage__capsuleTitle" data-bind="capsuleTitle">Wolf Encounter</span>
      <span class="BadlandsStage__capsuleType" data-bind="capsuleType">COMBAT</span>
    </div>
    <div class="BadlandsStage__capsuleTimer">
      <div class="BadlandsStage__capsuleTimerBar">
        <div class="BadlandsStage__capsuleTimerFill" data-bind="capsuleTimerFill"></div>
      </div>
      <span class="BadlandsStage__capsuleTimerValue" data-bind="capsuleTimerValue">30s</span>
    </div>
    <div class="BadlandsStage__capsuleTapHint">
      <span>Tap to view</span>
    </div>
  </div>

  <!-- COLLAPSED STATE: Small circle at top-right with radial timer -->
  <div class="BadlandsStage__eventOrb" data-visible="false" data-action="expandEvent">
    <svg class="BadlandsStage__orbTimer" viewBox="0 0 36 36">
      <circle class="BadlandsStage__orbTimerBg" cx="18" cy="18" r="16" fill="none" stroke="rgba(255,255,255,0.2)" stroke-width="2"/>
      <circle class="BadlandsStage__orbTimerFill" data-bind="orbTimerFill" cx="18" cy="18" r="16" fill="none" stroke="rgba(255,255,255,0.9)" stroke-width="2" stroke-linecap="round" transform="rotate(-90 18 18)" stroke-dasharray="100.53" stroke-dashoffset="0"/>
    </svg>
    <div class="BadlandsStage__orbIcon" data-bind="orbIcon">&#128058;</div>
    <div class="BadlandsStage__orbPulse"></div>
  </div>

  <!-- EXPANDED STATE: HUD view with scene info and engage button -->
  <div class="BadlandsStage__eventHUD" data-visible="false">
    <div class="BadlandsStage__hudBackdrop" data-action="collapseEvent"></div>
    <div class="BadlandsStage__hudPanel">
      <!-- HUD Header -->
      <div class="BadlandsStage__hudHeader">
        <div class="BadlandsStage__hudIcon" data-bind="hudIcon">&#128058;</div>
        <div class="BadlandsStage__hudInfo">
          <span class="BadlandsStage__hudTitle" data-bind="hudTitle">Wolf Encounter</span>
          <span class="BadlandsStage__hudType" data-bind="hudType">COMBAT</span>
        </div>
        <button class="BadlandsStage__hudClose" data-action="collapseEvent">&times;</button>
      </div>

      <!-- HUD Timer -->
      <div class="BadlandsStage__hudTimerRow">
        <div class="BadlandsStage__hudTimerBar">
          <div class="BadlandsStage__hudTimerFill" data-bind="hudTimerFill"></div>
        </div>
        <span class="BadlandsStage__hudTimerValue" data-bind="hudTimerValue">30s</span>
      </div>

      <!-- Scene Log Preview -->
      <div class="BadlandsStage__hudSceneLog">
        <div class="BadlandsStage__hudSceneLogHeader">
          <span class="BadlandsStage__hudSceneLogTitle">Scene Log</span>
        </div>
        <div class="BadlandsStage__hudSceneLogContent" data-bind="hudSceneLog">
          <!-- Recent scene beats rendered here -->
          <div class="BadlandsStage__hudSceneEntry">
            <span class="BadlandsStage__hudSceneTime">12:34</span>
            <span class="BadlandsStage__hudSceneText">A challenger approaches from the wilds...</span>
          </div>
        </div>
      </div>

      <!-- Engage Button -->
      <div class="BadlandsStage__hudActions">
        <button class="BadlandsStage__hudEngageBtn" data-action="engageEvent">
          <span class="BadlandsStage__hudEngageIcon">&#9876;</span>
          <span class="BadlandsStage__hudEngageLabel">Engage</span>
        </button>
        <span class="BadlandsStage__hudAutoNote">Auto-resolves if not engaged</span>
      </div>
    </div>
  </div>

  <!-- ═══════════════════════════════════════════════════════════════════════ -->
  <!-- WO-CAPSULE-V2: Quick-Engage Overlay -->
  <!-- Appears when story beat is generated, 5-second hold-to-engage -->
  <!-- If timer expires without engage, transitions to capsule notification -->
  <!-- ═══════════════════════════════════════════════════════════════════════ -->
  <div class="BadlandsStage__quickEngage" data-visible="false">
    <div class="BadlandsStage__quickEngageContent">
      <div class="BadlandsStage__quickEngageIcon" data-bind="quickEngageIcon">&#128058;</div>
      <div class="BadlandsStage__quickEngageInfo">
        <span class="BadlandsStage__quickEngageTitle" data-bind="quickEngageTitle">Wolf Encounter</span>
        <span class="BadlandsStage__quickEngageFlavor" data-bind="quickEngageFlavor">A challenger emerges from the wilds...</span>
      </div>
    </div>
    <div class="BadlandsStage__quickEngageTimer">
      <div class="BadlandsStage__quickEngageTimerBar">
        <div class="BadlandsStage__quickEngageTimerFill" data-bind="quickEngageTimerFill"></div>
      </div>
    </div>
    <button class="BadlandsStage__quickEngageBtn" data-action="holdToEngage">
      <span class="BadlandsStage__quickEngageBtnLabel">Hold to Engage</span>
      <div class="BadlandsStage__quickEngageProgress"></div>
    </button>
  </div>

  <!-- WO-UX-NEXT: Resolution Echo - shows cause→effect after incident resolves -->
  <div class="BadlandsStage__resolutionEcho" data-visible="false">
    <div class="BadlandsStage__echoIcon" data-bind="echoIcon">&#128058;</div>
    <div class="BadlandsStage__echoContent">
      <span class="BadlandsStage__echoTitle" data-bind="echoTitle">Wolf Pack</span>
      <span class="BadlandsStage__echoClosure" data-bind="echoClosure">The dust settles...</span>
    </div>
    <div class="BadlandsStage__echoVitals" data-bind="echoVitals">
      <!-- Vitals impact rendered dynamically -->
    </div>
  </div>

  <!-- ═══════════════════════════════════════════════════════════════════════ -->
  <!-- TOASTS & MODALS -->
  <!-- ═══════════════════════════════════════════════════════════════════════ -->

  <!-- Aid Avatar toast -->
  <div class="BadlandsStage__toast" data-toast="aid" data-visible="false">
    <span class="BadlandsStage__toastIcon">&#9876;</span>
    <span class="BadlandsStage__toastText">Manual battle mode coming soon! The autobattler handles this encounter.</span>
  </div>

  <!-- ═══════════════════════════════════════════════════════════════════════ -->
  <!-- WO-CAPSULE-V2: LEGACY - SLOW-TIME OVERLAY (DISABLED) -->
  <!-- This overlay is DISABLED - replaced by capsule notification system -->
  <!-- Kept for future reference/repurposing. To re-enable, see part.js -->
  <!-- episode:active and episode:engaged handlers -->
  <!-- ═══════════════════════════════════════════════════════════════════════ -->
  <div class="BadlandsStage__slowTime" data-visible="false" data-theme="combat" data-legacy-disabled="true">
    <div class="BadlandsStage__slowTimeOverlay"></div>
    <div class="BadlandsStage__slowTimeContent">

      <!-- WO-S3: Incident header (icon + title) -->
      <div class="BadlandsStage__incidentHeader">
        <span class="BadlandsStage__incidentIcon" data-bind="incidentIcon">&#9876;</span>
        <span class="BadlandsStage__incidentTitle" data-bind="incidentTitle">Encounter</span>
      </div>

      <!-- Caption (narrative) -->
      <div class="BadlandsStage__episodeCaption" data-bind="episodeCaption">
        A spending challenger approaches...
      </div>

      <!-- WO-S3: Dynamic actions container (Engage/Skip OR tagging options) -->
      <div class="BadlandsStage__overlayActions" data-bind="overlayActions">
        <!-- Populated dynamically by renderSlowTimeOverlay -->
      </div>

      <!-- Timer indicator -->
      <div class="BadlandsStage__slowTimeTimer">
        <div class="BadlandsStage__slowTimeTimerBar">
          <div class="BadlandsStage__slowTimeTimerFill" data-bind="slowTimeTimerFill"></div>
        </div>
        <span class="BadlandsStage__slowTimeTimerLabel">Auto-resolve in <span data-bind="slowTimeTimerValue">30</span>s</span>
      </div>

      <!-- Legacy tagging prompt (kept for backwards compatibility) -->
      <div class="BadlandsStage__taggingPrompt" style="display:none;">
        <h3 class="BadlandsStage__taggingQuestion" data-bind="taggingQuestion">
          What kind of spending was this?
        </h3>
        <div class="BadlandsStage__taggingOptions" data-bind="taggingOptions">
          <!-- Options populated dynamically -->
        </div>
      </div>

    </div>
  </div>

  <!-- Skill picker modal -->
  <div class="BadlandsStage__modal" data-modal="skillPicker" data-visible="false">
    <div class="BadlandsStage__modalContent">
      <div class="BadlandsStage__modalHeader">
        <span class="BadlandsStage__modalTitle">Select Skill</span>
        <button class="BadlandsStage__modalClose" data-action="closeModal">&times;</button>
      </div>
      <div class="BadlandsStage__modalBody" data-bind="availableSkills">
        <div class="BadlandsStage__skillOption" data-skill="strike">
          <span class="BadlandsStage__skillOptionIcon">&#9876;</span>
          <span class="BadlandsStage__skillOptionName">Strike</span>
          <span class="BadlandsStage__skillOptionCost">5 ST</span>
        </div>
        <div class="BadlandsStage__skillOption" data-skill="guard">
          <span class="BadlandsStage__skillOptionIcon">&#128737;</span>
          <span class="BadlandsStage__skillOptionName">Guard</span>
          <span class="BadlandsStage__skillOptionCost">3 ST</span>
        </div>
        <div class="BadlandsStage__skillOption" data-skill="heal">
          <span class="BadlandsStage__skillOptionIcon">&#10024;</span>
          <span class="BadlandsStage__skillOptionName">Heal</span>
          <span class="BadlandsStage__skillOptionCost">10 MP</span>
        </div>
      </div>
    </div>
  </div>

</div>
